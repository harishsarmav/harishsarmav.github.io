<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}

{% seo %}
  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="{{ '/' | relative_url }}">
          <h1>{{ site.title | default: site.github.repository_name }}</h1>
        </a>
        <h2>{{ site.description | default: site.github.project_tagline }}</h2>

        <section id="downloads">
          {% if site.show_downloads %}
            <a href="{{ site.github.zip_url }}" class="btn">Download as .zip</a>
            <a href="{{ site.github.tar_url }}" class="btn">Download as .tar.gz</a>
          {% endif %}
          <a href="{{ site.github.repository_url }}" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        {{ content }}
       <!-- <iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DX3rxVfibe1L0?utm_source=generator" width="300" height="380" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>-->
      <!--   <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/37i9dQZF1DX3rxVfibe1L0?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe> -->
       
<div id="current-track"></div>

<script>
  function getCurrentTrack() {
    fetch('https://api.spotify.com/v1/me/player/currently-playing', {
      headers: {
        'Authorization': 'Bearer e3fbc424454547529b127828563d79ce'
      }
    })
    .then(response => response.json())
    .then(data => {
      if(data.is_playing) {
        let trackName = data.item.name;
        let trackArtist = data.item.artists.map(artist => artist.name).join(', ');
        let trackAlbum = data.item.album.name;
        let trackImage = data.item.album.images[0].url;
        let trackUrl = data.item.external_urls.spotify;

        let currentTrack = document.getElementById('current-track');
        currentTrack.innerHTML = `
          <a href="${trackUrl}" target="_blank">
            <img src="${trackImage}" alt="${trackName}">
            <div>
              <p>${trackName}</p>
              <p>${trackArtist} - ${trackAlbum}</p>
            </div>
          </a>
        `;
      }
      else {
        let currentTrack = document.getElementById('current-track');
        currentTrack.innerHTML = 'No track currently playing';
      }
    });
  }

  getCurrentTrack();
  setInterval(getCurrentTrack, 10000); // refresh every 10 seconds
</script>

      </section>
    </div>
  </body>
</html>
